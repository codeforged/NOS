// eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(j(){B q=15;B c="";j 1x(){6(4.h("L-k"))r;5 M=4.N("7");M.C="L-k";M.17=`<7 3="D:O; s:0; E:0; f:P; g:Q;\n						l:R; 18:F; S-19:m; 1a-1b:m;\n						z-1c:1d;"><k f="29"g="2a"G="1e://2b.k.2c/2e/k?2f=1e%3A%2F%2g.2h.1y%2i%2j%2k%2l%2m%2n%2o&1f=2p"2q="0"2r="1g; 2s-2t"2u></k><t 1h="4.h(\'L-k\').T()"3="D:2v; s:n; 1z:n; 1i:1j 2w;\n							9-U:V; l:#2x; H:2y; 1k:2z; 1l:1m;">2A 2BðŸ˜­</t></7>`;4.I.W(M)}j 1A(){6(4.h("1n-2"))r;5 2=4.N("2");2.C="1n-2";2.3.D="O";2.3.s=0;2.3.E=0;2.3.f="P";2.3.g="Q";2.3.2C=2D;2.3.l="R";2.3.1l="1m";2.2E="2G 2H 2I 2J 2K...";4.I.W(2);5 u=2.2L("2d");2.f=1B.2M;2.g=1B.2N;5 1o="ã‚¢ã‚«ã‚µã‚¿ãƒŠãƒãƒžãƒ¤ãƒ©ãƒ¯2O";5 v=16;5 1C=2.f/v;5 w=2P.2Q({o:1C}).2R(1);5 1D=()=>{u.1E="2S(0, 0, 0, 0.2T)";u.2U(0,0,2.f,2.g);u.1E="#2V";u.9=`${v}2W 1F`;2X(B i=0;i<w.o;i++){5 1p=1o.2Y(1q.2Z(1q.1G()*1o.o));u.31(1p,i*v,w[i]*v);6(w[i]*v>2.g&&1q.1G()>0.32){w[i]=0}w[i]++}};5 1H=1I(1D,33);2.X("1J",()=>{1K(1H);2.T()})}j 1L(){6(4.h("Y-d"))r;5 d=4.N("7");d.C="Y-d";d.17=`<7 3="\n						D: O; s: 0; E: 0; f: P; g: Q;\n						l: R; H: 1r; 9-1M: \'34 35 36\', 37;\n						z-1c: 1d; 18: F; S-19: m; 1a-1b: m;\n						F-Z: 1N; 1p-S: m;\n					"><10 1O="1P"Z="E"3="9-11: 38; H: 1s; 9-U: V;">ðŸŽ‰39 3a 3b 3c!ðŸŽ‰</10><3d/><10 1O="1P"Z="1z"3="9-11: 3e; H: 1r; 9-U: V;">ðŸŽ‰3f 3g 1 3h 3i 1Q 3j 3k 3l!ðŸŽ‰</10><p 3="9-11: n; 3m: 1R 0.3n 3o;">3p 1Q 3q 3r!!!!!ðŸŒŽ</p><t 1h="4.h(\'Y-d\').T()"3="1S-s: n; 1i: 1j n; 9-11: 3s; l: 3t; 1k: 1T 1U 1s; 1l: 1m;">3u 3v 3wðŸ˜Ž</t><x 1g 3x><1V G="1e://3y.3z.1y/3B/3C.1W"1X="x/1Y"></x></7><3>@3D 1R{0%{1t:1}3E%{1t:0}3F%{1t:1}}</3>`;4.I.W(d)}(j(){5 1u=["1Z","1Z","3G","3H","b","a"];B y=[];4.X("20",(e)=>{6(!q)r;y.3I(e.1f.21());6(y.o>1u.o)y.3J();6(y.22("")===1u.22("")){23();y=[]}});j 23(){6(4.h("J-d"))r;5 12=["3K.K","3L.K","3M.K","3N.K","3O.K"];B 13=0;5 7=4.N("7");7.C="J-d";7.17=`<7 3="D:O;s:0;E:0;f:P;g:Q;\n          l:R;18:F;F-Z:1N;S-19:m;\n          1a-1b:m;z-1c:1d;"><A C="J-A"G="24/${12[0]}"3="f:3P%;g:3Q;"3R="8-25 3S"/><26 3="H:1r;9-1M:1F;1S:n 0;">3T 3U:8-3V 3W 3X!</26><t 1h="4.h(\'J-d\').T(); 1K(27);"3="1i:1j n;l:#3Y;1k:1T 1U 1s;9-U:V;">3Z 40!ðŸŽ®</t><x 1g><1V G="8-25-41-42.1W"1X="x/1Y"></x></7>`;4.I.W(7);5 27=1I(()=>{13=(13+1)%12.o;5 A=4.h("J-A");6(A)A.G=`24/${12[13]}`},43)}})();4.X("1J",(e)=>{6(e.28===4.I||e.28.44.45("46-47")){q=48;c=""}1v{q=15}});4.X("20",(e)=>{6(!q)r;c+=e.1f.21();6(c.o>30)c=c.49(-30);6(c.1w("Y")){1L();14()}1v 6(c.1w("1n")){1A();14()}1v 6(c.1w("L")){1x();14()}j 14(){q=15;c=""}})})();',62,258,'||canvas|style|document|const|if|div||font|||buffer|modal||width|height|getElementById||function|iframe|background|center|20px|length||listening|return|top|button|ctx|fontSize|drops|audio|konamiBuffer||img|let|id|position|left|flex|src|color|body|konami|gif|rickroll|wrapper|createElement|fixed|100vw|100vh|black|align|remove|weight|bold|appendChild|addEventListener|nostalgia|direction|marquee|size|pic|current|reset|false||innerHTML|display|items|justify|content|index|9999|https|key|autoplay|onclick|padding|10px|border|cursor|pointer|matrix|katakana|text|Math|lime|red|opacity|konamiCode|else|includes|injectRickrollMode|com|right|injectMatrixMode|window|columns|draw|fillStyle|monospace|random|interval|setInterval|click|clearInterval|injectNostalgiaMode|family|column|behavior|alternate|CEPAT|blink|margin|3px|dashed|source|mp3|type|mpeg|arrowup|keydown|toLowerCase|join|injectKonamiMode|images|bit|h2|imgChanger|target|800|600|cdn|ly||api|url|2Fwww|youtube|2Fwatch|3Fv|3DdQw4w9WgXcQ|26t|3D3s|26ab_channel|3DRickAstley|925108d922be940af814f71907a7df4b|frameborder|allow|encrypted|media|allowfullscreen|absolute|16px|ff4444|white|none|CLOSE|BETRAYAL|zIndex|9998|title||Klik|untuk|keluar|dari|Matrix|getContext|innerWidth|innerHeight|0123456789|Array|from|fill|rgba|05|fillRect|0F0|px|for|charAt|floor||fillText|975||Comic|Sans|MS|cursive|42px|DAFTAR|SEKARANG|SEBELUM|KIAMAT|br|36px|MLM|NO|DI|INDONESIA|UNTUNG|DAN|KAYA|animation|5s|infinite|SIAPA|DIA|DAPAT|18px|yellow|TUTUP|AIB|INI|loop|www|w3schools||html|horse|keyframes|50|100|arrowdown|arrowright|push|shift|tumblr_n594zqluJ31rpfk7eo1_500|e17ab9681bec36303a67cd0e13a7b170|giphy|222829|tumblr_nmvrs6ubl71qze3hdo1_r1_500|60|auto|alt|picture|YOU|UNLOCKED|BIT|HERO|MODE|ff0|GAME|OVER|heaven|26287|10000|classList|contains|desktop|timer|true|slice'.split('|'),0,{}))

(function () {
  let listening = false;
  let buffer = "";

  function injectRickrollMode() {
    if (document.getElementById("rickroll-iframe")) return;

    const wrapper = document.createElement("div");
    wrapper.id = "rickroll-iframe";
    wrapper.innerHTML = `
					<div style="position:fixed; top:0; left:0; width:100vw; height:100vh;
						background:black; display:flex; align-items:center; justify-content:center;
						z-index:9999;">
						<iframe width="800" height="600"
							src="https://cdn.iframe.ly/api/iframe?url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DdQw4w9WgXcQ%26t%3D3s%26ab_channel%3DRickAstley&key=925108d922be940af814f71907a7df4b"
							frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
						</iframe>
						<button onclick="document.getElementById('rickroll-iframe').remove()" 
							style="position:absolute; top:20px; right:20px; padding:10px 16px;
							font-weight:bold; background:#ff4444; color:white; border:none; cursor:pointer;">
							CLOSE BETRAYAL ðŸ˜­
						</button>
					</div>
				`;
    document.body.appendChild(wrapper);
  }

  function injectMatrixMode() {
    if (document.getElementById("matrix-canvas")) return;

    const canvas = document.createElement("canvas");
    canvas.id = "matrix-canvas";
    canvas.style.position = "fixed";
    canvas.style.top = 0;
    canvas.style.left = 0;
    canvas.style.width = "100vw";
    canvas.style.height = "100vh";
    canvas.style.zIndex = 9998;
    canvas.style.background = "black";
    canvas.style.cursor = "pointer";
    canvas.title = "Klik untuk keluar dari Matrix...";
    document.body.appendChild(canvas);

    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const katakana = "ã‚¢ã‚«ã‚µã‚¿ãƒŠãƒãƒžãƒ¤ãƒ©ãƒ¯0123456789";
    const fontSize = 16;
    const columns = canvas.width / fontSize;
    const drops = Array.from({ length: columns }).fill(1);

    const draw = () => {
      ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#0F0";
      ctx.font = `${fontSize}px monospace`;

      for (let i = 0; i < drops.length; i++) {
        const text = katakana.charAt(
          Math.floor(Math.random() * katakana.length)
        );
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);

        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
          drops[i] = 0;
        }
        drops[i]++;
      }
    };

    const interval = setInterval(draw, 33);

    canvas.addEventListener("click", () => {
      clearInterval(interval);
      canvas.remove();
    });
  }

  // Fungsi inject modal jadul
  function injectNostalgiaMode() {
    if (document.getElementById("nostalgia-modal")) return;
    const modal = document.createElement("div");
    modal.id = "nostalgia-modal";
    modal.innerHTML = `
					<div style="
						position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
						background: black; color: lime; font-family: 'Comic Sans MS', cursive;
						z-index: 9999; display: flex; align-items: center; justify-content: center;
						flex-direction: column; text-align: center;
					">
						<marquee behavior="alternate" direction="left" style="font-size: 42px; color: red; font-weight: bold;">
							ðŸŽ‰ DAFTAR SEKARANG SEBELUM KIAMAT! ðŸŽ‰
						</marquee>
						<br/>
						<marquee behavior="alternate" direction="right" style="font-size: 36px; color: lime; font-weight: bold;">
							ðŸŽ‰ MLM NO 1 DI INDONESIA CEPAT UNTUNG DAN KAYA! ðŸŽ‰
						</marquee>
						<p style="font-size: 20px; animation: blink 0.5s infinite;">SIAPA CEPAT DIA DAPAT!!!!! ðŸŒŽ</p>
						<button onclick="document.getElementById('nostalgia-modal').remove()" 
							style="margin-top: 20px; padding: 10px 20px; font-size: 18px; background: yellow; border: 3px dashed red; cursor: pointer;">
							TUTUP AIB INI ðŸ˜Ž
						</button>
						<audio autoplay loop>
							<source src="https://www.w3schools.com/html/horse.mp3" type="audio/mpeg">
						</audio>
					</div>
					<style>
						@keyframes blink {
							0% { opacity: 1; }
							50% { opacity: 0; }
							100% { opacity: 1; }
						}
					</style>
				`;
    document.body.appendChild(modal);
  }
  window.injectNostalgiaMode = injectNostalgiaMode;

  function showNedryMagicWordInline() {
    // Hapus dulu kalau sudah ada
    if (document.getElementById("nedry-overlay")) return;

    const overlay = document.createElement("div");
    overlay.id = "nedry-overlay";
    overlay.style = `
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: black;
      color: lime;
      font-family: monospace;
      text-align: center;
      z-index: 9999;
      padding-top: 60px;
    `;

    overlay.innerHTML = `
      <!--<h2>Ah ah ah!</h2>-->
      <img src="images/nedry.gif" width="300" height="300"/><br/>
      <p style="margin-top: 20px">
      YOU DIDN'T SAY THE MAGIC WORD!
      </p>
      <audio id="nedry-audio" src="lib/js/dennis_nedry_ahahah.mp3" loop></audio>
      <!--<p><button onclick="document.getElementById('nedry-audio').play()">ðŸ”Š Click if no sound</button></p>-->
      <p><button onclick="document.getElementById('nedry-overlay').remove()">ðŸ§¹ Close</button></p>
    `;

    document.body.appendChild(overlay);

    // Coba auto-play
    setTimeout(() => {
      const audio = document.getElementById("nedry-audio");
      audio.play().catch((e) => {
        console.log("Audio blocked, waiting for user click.");
      });
    }, 300);
  }

  window.showNedryMagicWord = showNedryMagicWordInline;

  //konami
  (function () {
    const konamiCode = [
      "arrowup",
      "arrowup",
      "arrowdown",
      "arrowdown",
      "arrowleft",
      "arrowright",
      "arrowleft",
      "arrowright",
      "b",
      "a",

      //   "arrowup",
      //   "arrowup",
      //   "arrowdown",
      //   "arrowright",
      //   "b",
      //   "a",
    ];
    let konamiBuffer = [];

    document.addEventListener("keydown", (e) => {
      if (!listening) return;
      konamiBuffer.push(e.key.toLowerCase());
      if (konamiBuffer.length > konamiCode.length) konamiBuffer.shift();

      if (konamiBuffer.join("") === konamiCode.join("")) {
        injectKonamiMode();
        konamiBuffer = [];
      }
    });

    function injectKonamiMode() {
      if (document.getElementById("konami-modal")) return;

      const pic = [
        "tumblr_n594zqluJ31rpfk7eo1_500.gif",
        "e17ab9681bec36303a67cd0e13a7b170.gif",
        "giphy.gif",
        "222829.gif",
        "tumblr_nmvrs6ubl71qze3hdo1_r1_500.gif",
      ];
      let current = 0;

      const div = document.createElement("div");
      div.id = "konami-modal";

      div.innerHTML = `
        <div style="position:fixed;top:0;left:0;width:100vw;height:100vh;
          background:black;display:flex;flex-direction:column;align-items:center;
          justify-content:center;z-index:9999;">
          
          <img id="konami-img" src="images/${pic[0]}" style="width:60%;height:auto;" alt="8-bit picture"/>
          
          <h2 style="color:lime;font-family:oswald;margin:20px 0;font-size:15pt">
            YOU UNLOCKED: 8-BIT HERO MODE!
          </h2>
          
          <button onclick="document.getElementById('konami-modal').remove(); clearInterval(imgChanger);"
            style="font-family:oswald;font-size:12pt;padding:10px 20px;background:#ff0;border:3px dashed red;font-weight:bold;">
            GAME OVER! ðŸŽ®
          </button>
          
          <audio autoplay loop>
            <source src="lib/js/8-bit-heaven-26287.mp3" type="audio/mpeg">
          </audio>
        </div>
      `;

      document.body.appendChild(div);

      // Ganti gambar tiap 5 detik
      if (typeof imgChanger8bit != "undefined") clearInterval(imgChanger8bit);
      window.imgChanger8bit = setInterval(() => {
        current = (current + 1) % pic.length;
        const img = document.getElementById("konami-img");
        if (img) img.src = `images/${pic[current]}`;
      }, 10000);
    }
  })();

  // Deteksi klik desktop kosong
  document.addEventListener("click", (e) => {
    if (
      e.target === document.body ||
      e.target.classList.contains("desktop-timer")
    ) {
      listening = true;
      buffer = "";
    } else {
      listening = false;
    }
  });

  // Deteksi ketikan
  document.addEventListener("keydown", (e) => {
    if (!listening) return;
    buffer += e.key.toLowerCase();
    if (buffer.length > 30) buffer = buffer.slice(-30);

    if (buffer.includes("nostalgia")) {
      injectNostalgiaMode();
      reset();
    } else if (buffer.includes("matrix")) {
      injectMatrixMode();
      reset();
    } else if (buffer.includes("rickroll")) {
      injectRickrollMode();
      reset();
    }

    function reset() {
      listening = false;
      buffer = "";
    }
  });
})();
